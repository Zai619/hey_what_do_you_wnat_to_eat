<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>麥味登主餐菜單</title>
      <style type="text/css">
          body {
              background: #C4E8CA;
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 0;
          }
          h1 {
              margin-top: 3%;
              color: #367140;
              text-align: center;
              font-size: 50px;
          }
          h1 img {
              margin-left: 10px;
              margin-top: 1px;
              width: 55px;
              height: 55px;
          }
          p {
              color: #38BC4E;
              text-align: center;
              font-size: 25px;
              font-weight: bold;
          }
          .container {
              display: flex;
              flex-wrap: wrap;
              justify-content: center;
              margin-top: 30px;
          }
          .category {
              margin: 20px;
              text-align: center;
          }
          .category label {
              display: block;
              color: #38BC4E;
              font-size: 25px;
              font-weight: bold;
              padding: 10px;
          }
          .category input {
              margin-right: 10px;
          }
          .category img {
              vertical-align: middle;
              width: 40px;
              height: 40px;
          }
          .category-title {
              color: #367140;
              font-size: 40px;
              font-weight: bold;
              text-align: center;
              margin-bottom: 10px;
          }
          .submit-btns {
              text-align: center;
              margin-top: 30px;
          }
          .submit-btns input {
              width: 150px;
              height: 50px;
              color: #367140;
              font-size: 25px;
              font-weight: bold;
              margin: 10px;
          }
		  .hi{ font-size: 35px;color:#367140;}
      </style>
	  <script>
	  	 var pc = window.prompt("請輸入你的預算");
		   function limitCheckboxSelection(maxSelections, maxPrice) {
			  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
			  checkboxes.forEach((checkbox) => {
				 checkbox.addEventListener('change', () => {
					const checkedItems = document.querySelectorAll('input[type="checkbox"]:checked');
					const checkedCount = checkedItems.length;
					let validSelection = true;

					// Check if any selected item's price exceeds the limit
					checkedItems.forEach((item) => {
					   const price = parseInt(item.getAttribute('data-price'), 10);
					   if (price > maxPrice) {
						  validSelection = false;
					   }
					});

					if (!validSelection) {
					   alert(`你的預算只有${maxPrice} 元喔！`);
					   checkbox.checked = false;
					   return;
					}

					if (checkedCount > maxSelections) {
					   alert(`最多只能選擇 ${maxSelections} 項餐點喔！`);
					   checkbox.checked = false;
					}
				 });
			  });
		   }

		   window.onload = function () {
			  while(pc === null || isNaN(pc) || parseInt(pc) < 35 || pc.trim() === ""){
				 pc = window.prompt("請輸入你的預算");
			  }
			  limitCheckboxSelection(6, parseInt(pc)); // 限制最多選擇 6 項且價格在 50 元以下
			  //localstorage start
				const form = document.querySelector('form');
				
				form.addEventListener('submit', function (e) {
					e.preventDefault(); // 防止表單的預設提交

					const checkedItems = document.querySelectorAll('input[type="checkbox"]:checked');
					const prices = Array.from(checkedItems).map(item => item.getAttribute('data-price'));

					// 儲存到 localStorage
					localStorage.setItem('pc', pc);
					localStorage.setItem('prices', JSON.stringify(prices));

					// 繼續表單提交
					this.submit();
				});
				//localstorage end
		   };
	  </script>
   </head>
   <body>
        <h1>麥味登<img src="1.png" alt="Logo"></h1>
        <p>麥味登是一家提供多樣早餐選擇的店鋪，專注於新鮮、營養的餐點，從經典三明治到多種口味的麵包，讓顧客享受快速又美味的早餐。</p>
        <p class="hi">請勾選想要的餐點</p>
        
        <form method="get" action="動態轉盤.php">
            <div class="container">
                <div class="category">
                    <div class="category-title">滿分堡<img src="burger1.png" alt="Burger"></div>
                    <label><input name="mainQurberger[]" type="checkbox" value="歐姆蛋滿分堡" data-price = "45">歐姆蛋滿分堡 $45</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="火腿薯餅滿分堡" data-price = "45">火腿薯餅滿分堡 $45</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="超厚雞肉起司滿分堡" data-price = "60">超厚雞肉起司滿分堡 $60</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="原塊嫩雞起司滿分堡" data-price = "70">原塊嫩雞起司滿分堡 $70</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="豬肉起司滿分堡" data-price = "50">豬肉起司滿分堡 $50</label>
                </div>

                <div class="category">
                    <div class="category-title">漢堡<img src="hamburger.png" alt="Sandwich"></div>
                    <label><input name="mainQurberger[]" type="checkbox" value="黑胡椒豬里肌漢堡" data-price = "50">黑胡椒豬里肌漢堡 $50</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="香雞漢堡" data-price = "35">香雞漢堡 $35</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="鮪魚漢堡" data-price = "45">鮪魚漢堡 $45</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="燻雞漢堡" data-price = "45">燻雞漢堡 $45</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="培根漢堡" data-price = "45">培根漢堡 $45</label>
                </div>

                <div class="category">
                    <div class="category-title">可頌<img src="croissant.png" alt="Egg"></div>
                    <label><input name="mainQurberger[]" type="checkbox" value="檸檬雞可頌" data-price = "60">檸檬雞可頌 $60</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="卡滋雞腿可頌" data-price = "80">卡滋雞腿可頌 $80</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="超厚蔬肉可頌" data-price = "85">超厚蔬肉可頌 $85</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="原塊嫩雞起司可頌" data-price = "100">原塊嫩雞起司可頌 $100</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="歐姆蛋可頌" data-price = "60">歐姆蛋可頌 $60</label>
                </div>

                <div class="category">
                    <div class="category-title">丹麥堡<img src="bread 2.png" alt="Noodle"></div>
                    <label><input name="mainQurberger[]" type="checkbox" value="檸檬雞丹麥堡" data-price = "60">檸檬雞丹麥堡 $60</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="卡滋雞腿丹麥堡" data-price = "80">卡滋雞腿丹麥堡 $80</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="超厚蔬肉丹麥堡" data-price = "85">超厚蔬肉丹麥堡 $85</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="原塊嫩雞起司丹麥堡" data-price = "100">原塊嫩雞起司丹麥堡 $100</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="歐姆蛋丹麥堡" data-price = "60">歐姆蛋丹麥堡 $60</label>
                </div>

                <div class="category">
                    <div class="category-title">捲餅<img src="burrito.png" alt="Burrito"></div>
                    <label><input name="mainQurberger[]" type="checkbox" value="蕈菇握蛋捲餅" data-price = "65">蕈菇握蛋捲餅 $65</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="鮪魚握蛋捲餅" data-price = "65">鮪魚握蛋捲餅 $65</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="德腸握蛋捲餅" data-price = "65">德腸握蛋捲餅 $65</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="起司雙重奏握蛋捲餅" data-price = "65">起司雙重奏握蛋捲餅 $65</label>
                    <label><input name="mainQurberger[]" type="checkbox" value="燻雞握蛋捲餅" data-price = "65">燻雞握蛋捲餅 $65</label>
                </div>
            </div>
            
            <div class="submit-btns">
                <input type="submit" value="Submit">
                <input type="reset" value="Clear">
            </div>
        </form>
   </body>
</html>
